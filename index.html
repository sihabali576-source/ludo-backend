<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LUDO PARTY - Admin Panel</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="admin.css">
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-database-compat.js"></script>
</head>
<body>

<!-- LOGIN SCREEN -->
<div id="login-screen" class="login-container">
    <div class="login-box">
        <div class="login-header">
            <i class="fas fa-dice"></i>
            <h1>LUDO PARTY</h1>
            <p>Admin Panel</p>
        </div>
        <form onsubmit="handleAdminLogin(event)">
            <div class="input-group">
                <i class="fas fa-user"></i>
                <input type="text" id="admin-username" placeholder="Admin Username" required>
            </div>
            <div class="input-group">
                <i class="fas fa-lock"></i>
                <input type="password" id="admin-password" placeholder="Password" required>
            </div>
            <button type="submit" class="login-btn">
                <i class="fas fa-sign-in-alt"></i> Login
            </button>
        </form>
        <div class="login-footer">
            <a href="../index.html"><i class="fas fa-arrow-left"></i> Back to Game</a>
        </div>
    </div>
</div>

<!-- ADMIN DASHBOARD -->
<div id="admin-dashboard" class="dashboard-container" style="display: none;">
    
    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <i class="fas fa-dice"></i>
            <h2>LUDO PARTY</h2>
            <span>Admin Panel</span>
        </div>
        
        <nav class="sidebar-nav">
            <a href="#" class="nav-item active" onclick="showSection('dashboard')">
                <i class="fas fa-home"></i>
                <span>Dashboard</span>
            </a>
            <a href="#" class="nav-item" onclick="showSection('users')">
                <i class="fas fa-users"></i>
                <span>Users</span>
                <span class="badge" id="users-count">0</span>
            </a>
            <a href="#" class="nav-item" onclick="showSection('deposits')">
                <i class="fas fa-download"></i>
                <span>Deposits</span>
                <span class="badge pending" id="deposit-count">0</span>
            </a>
            <a href="#" class="nav-item" onclick="showSection('withdraws')">
                <i class="fas fa-upload"></i>
                <span>Withdraws</span>
                <span class="badge pending" id="withdraw-count">0</span>
            </a>
            <a href="#" class="nav-item" onclick="showSection('games')">
                <i class="fas fa-gamepad"></i>
                <span>Live Games</span>
                <span class="badge live" id="games-count">0</span>
            </a>
            <a href="#" class="nav-item" onclick="showSection('transactions')">
                <i class="fas fa-history"></i>
                <span>Transactions</span>
            </a>
            <a href="#" class="nav-item" onclick="showSection('settings')">
                <i class="fas fa-cog"></i>
                <span>Settings</span>
            </a>
        </nav>
        
        <div class="sidebar-footer">
            <button onclick="adminLogout()" class="logout-btn">
                <i class="fas fa-sign-out-alt"></i> Logout
            </button>
        </div>
    </div>
    
    <!-- Main Content -->
    <div class="main-content">
        
        <!-- Top Bar -->
        <div class="topbar">
            <button class="menu-toggle" onclick="toggleSidebar()">
                <i class="fas fa-bars"></i>
            </button>
            <div class="topbar-title">
                <h2 id="page-title">Dashboard</h2>
            </div>
            <div class="topbar-actions">
                <span class="admin-name"><i class="fas fa-user-shield"></i> Admin</span>
                <span class="live-indicator"><i class="fas fa-circle"></i> Live</span>
            </div>
        </div>
        
        <!-- Dashboard Section -->
        <section id="section-dashboard" class="content-section active">
            <div class="stats-grid">
                <div class="stat-card blue">
                    <div class="stat-icon"><i class="fas fa-users"></i></div>
                    <div class="stat-info">
                        <h3 id="stat-users">0</h3>
                        <p>Total Users</p>
                    </div>
                </div>
                <div class="stat-card green">
                    <div class="stat-icon"><i class="fas fa-gamepad"></i></div>
                    <div class="stat-info">
                        <h3 id="stat-games">0</h3>
                        <p>Total Games</p>
                    </div>
                </div>
                <div class="stat-card yellow">
                    <div class="stat-icon"><i class="fas fa-coins"></i></div>
                    <div class="stat-info">
                        <h3 id="stat-revenue">৳0</h3>
                        <p>Total Revenue</p>
                    </div>
                </div>
                <div class="stat-card red">
                    <div class="stat-icon"><i class="fas fa-clock"></i></div>
                    <div class="stat-info">
                        <h3 id="stat-pending">0</h3>
                        <p>Pending Requests</p>
                    </div>
                </div>
            </div>
            
            <div class="dashboard-grid">
                <div class="card">
                    <div class="card-header">
                        <h3><i class="fas fa-download"></i> Recent Deposits</h3>
                        <a href="#" onclick="showSection('deposits')">View All</a>
                    </div>
                    <div class="card-body" id="recent-deposits">
                        <p class="no-data">No recent deposits</p>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <h3><i class="fas fa-upload"></i> Recent Withdraws</h3>
                        <a href="#" onclick="showSection('withdraws')">View All</a>
                    </div>
                    <div class="card-body" id="recent-withdraws">
                        <p class="no-data">No recent withdraws</p>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h3><i class="fas fa-gamepad"></i> Live Games</h3>
                    <span class="live-badge"><i class="fas fa-circle"></i> Real-time</span>
                </div>
                <div class="card-body" id="live-games">
                    <p class="no-data">No live games</p>
                </div>
            </div>
        </section>
        
        <!-- Users Section -->
        <section id="section-users" class="content-section">
            <div class="section-header">
                <h3>All Users</h3>
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="user-search" placeholder="Search users..." oninput="searchUsers()">
                </div>
            </div>
            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>User ID</th>
                            <th>Name</th>
                            <th>Balance</th>
                            <th>Wins</th>
                            <th>Losses</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="users-table">
                        <tr><td colspan="7" class="no-data">Loading...</td></tr>
                    </tbody>
                </table>
            </div>
        </section>
        
        <!-- Deposits Section -->
        <section id="section-deposits" class="content-section">
            <div class="section-header">
                <h3>Deposit Requests</h3>
                <div class="filter-tabs">
                    <button class="filter-btn active" onclick="filterDeposits('pending')">Pending</button>
                    <button class="filter-btn" onclick="filterDeposits('approved')">Approved</button>
                    <button class="filter-btn" onclick="filterDeposits('rejected')">Rejected</button>
                    <button class="filter-btn" onclick="filterDeposits('all')">All</button>
                </div>
            </div>
            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>User</th>
                            <th>Method</th>
                            <th>Amount</th>
                            <th>TrxID</th>
                            <th>Number</th>
                            <th>Date</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="deposits-table">
                        <tr><td colspan="9" class="no-data">Loading...</td></tr>
                    </tbody>
                </table>
            </div>
        </section>
        
        <!-- Withdraws Section -->
        <section id="section-withdraws" class="content-section">
            <div class="section-header">
                <h3>Withdraw Requests</h3>
                <div class="filter-tabs">
                    <button class="filter-btn active" onclick="filterWithdraws('pending')">Pending</button>
                    <button class="filter-btn" onclick="filterWithdraws('approved')">Approved</button>
                    <button class="filter-btn" onclick="filterWithdraws('rejected')">Rejected</button>
                    <button class="filter-btn" onclick="filterWithdraws('all')">All</button>
                </div>
            </div>
            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>User</th>
                            <th>Method</th>
                            <th>Amount</th>
                            <th>Number</th>
                            <th>Date</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="withdraws-table">
                        <tr><td colspan="8" class="no-data">Loading...</td></tr>
                    </tbody>
                </table>
            </div>
        </section>
        
        <!-- Games Section -->
        <section id="section-games" class="content-section">
            <div class="section-header">
                <h3>Live Games Monitor</h3>
                <span class="live-badge"><i class="fas fa-circle"></i> Real-time Updates</span>
            </div>
            <div class="games-grid" id="games-grid">
                <p class="no-data">No active games</p>
            </div>
        </section>
        
        <!-- Transactions Section -->
        <section id="section-transactions" class="content-section">
            <div class="section-header">
                <h3>All Transactions</h3>
                <div class="filter-tabs">
                    <button class="filter-btn active" onclick="filterTransactions('all')">All</button>
                    <button class="filter-btn" onclick="filterTransactions('deposit')">Deposits</button>
                    <button class="filter-btn" onclick="filterTransactions('withdraw')">Withdraws</button>
                    <button class="filter-btn" onclick="filterTransactions('game')">Games</button>
                </div>
            </div>
            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Type</th>
                            <th>User</th>
                            <th>Amount</th>
                            <th>Details</th>
                            <th>Date</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="transactions-table">
                        <tr><td colspan="7" class="no-data">Loading...</td></tr>
                    </tbody>
                </table>
            </div>
        </section>
        
        <!-- Settings Section -->
        <section id="section-settings" class="content-section">
            <div class="settings-grid">
                <div class="card">
                    <div class="card-header">
                        <h3><i class="fas fa-mobile-alt"></i> Payment Numbers</h3>
                    </div>
                    <div class="card-body">
                        <div class="form-group">
                            <label><i class="fas fa-wallet" style="color: #e2136e;"></i> bKash Number</label>
                            <input type="text" id="setting-bkash" placeholder="01XXXXXXXXX">
                        </div>
                        <div class="form-group">
                            <label><i class="fas fa-wallet" style="color: #f7941d;"></i> Nagad Number</label>
                            <input type="text" id="setting-nagad" placeholder="01XXXXXXXXX">
                        </div>
                        <div class="form-group">
                            <label><i class="fas fa-wallet" style="color: #8c3494;"></i> Rocket Number</label>
                            <input type="text" id="setting-rocket" placeholder="01XXXXXXXXX">
                        </div>
                        <button class="save-btn" onclick="savePaymentSettings()">
                            <i class="fas fa-save"></i> Save Settings
                        </button>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <h3><i class="fas fa-percent"></i> Commission Settings</h3>
                    </div>
                    <div class="card-body">
                        <div class="form-group">
                            <label>Game Commission (%)</label>
                            <input type="number" id="setting-commission" placeholder="5" min="0" max="50">
                        </div>
                        <div class="form-group">
                            <label>Minimum Bet (৳)</label>
                            <input type="number" id="setting-min-bet" placeholder="50">
                        </div>
                        <div class="form-group">
                            <label>Maximum Bet (৳)</label>
                            <input type="number" id="setting-max-bet" placeholder="10000">
                        </div>
                        <button class="save-btn" onclick="saveGameSettings()">
                            <i class="fas fa-save"></i> Save Settings
                        </button>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <h3><i class="fas fa-key"></i> Change Password</h3>
                    </div>
                    <div class="card-body">
                        <div class="form-group">
                            <label>Current Password</label>
                            <input type="password" id="current-password" placeholder="••••••••">
                        </div>
                        <div class="form-group">
                            <label>New Password</label>
                            <input type="password" id="new-password" placeholder="••••••••">
                        </div>
                        <div class="form-group">
                            <label>Confirm Password</label>
                            <input type="password" id="confirm-password" placeholder="••••••••">
                        </div>
                        <button class="save-btn" onclick="changePassword()">
                            <i class="fas fa-key"></i> Change Password
                        </button>
                    </div>
                </div>
            </div>
        </section>
        
    </div>
</div>

<!-- Toast Notification -->
<div id="toast" class="toast"></div>

<!-- Confirmation Modal -->
<div id="confirm-modal" class="modal">
    <div class="modal-content">
        <h3 id="modal-title">Confirm Action</h3>
        <p id="modal-message">Are you sure?</p>
        <div class="modal-actions">
            <button class="btn-cancel" onclick="closeModal()">Cancel</button>
            <button class="btn-confirm" id="modal-confirm-btn">Confirm</button>
        </div>
    </div>
</div>

<script src="admin.js"></script>
</body>
</html>